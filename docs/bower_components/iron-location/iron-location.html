<html><head><link rel="import" href="../polymer/polymer.html"><script>(function(){'use strict';function a(g,h){var j;if(void 0===b){b=!1;try{var k=new URL('b','http://a');k.pathname='c%20d',b='http://a/c%20d'===k.href,b=b&&'http://www.google.com/?foo%20bar'===new URL('http://www.google.com/?foo bar').href}catch(l){}}return b?j=new URL(g,h):(!c&&(c=document.implementation.createHTMLDocument('url'),d=c.createElement('base'),c.head.appendChild(d),f=c.createElement('a')),d.href=h,f.href=g.replace(/ /g,'%20'),j=f),j}var b,c,d,f;Polymer({is:'iron-location',properties:{path:{type:String,notify:!0,value:function(){return window.decodeURIComponent(window.location.pathname)}},query:{type:String,notify:!0,value:function(){return window.location.search.slice(1)}},hash:{type:String,notify:!0,value:function(){return window.decodeURIComponent(window.location.hash.slice(1))}},dwellTime:{type:Number,value:2e3},urlSpaceRegex:{type:String,value:''},_urlSpaceRegExp:{computed:'_makeRegExp(urlSpaceRegex)'},_lastChangedAt:{type:Number},_initialized:{type:Boolean,value:!1}},hostAttributes:{hidden:!0},observers:['_updateUrl(path, query, hash)'],attached:function(){this.listen(window,'hashchange','_hashChanged'),this.listen(window,'location-changed','_urlChanged'),this.listen(window,'popstate','_urlChanged'),this.listen(document.body,'click','_globalOnClick'),this._lastChangedAt=window.performance.now()-(this.dwellTime-200),this._initialized=!0,this._urlChanged()},detached:function(){this.unlisten(window,'hashchange','_hashChanged'),this.unlisten(window,'location-changed','_urlChanged'),this.unlisten(window,'popstate','_urlChanged'),this.unlisten(document.body,'click','_globalOnClick'),this._initialized=!1},_hashChanged:function(){this.hash=window.decodeURIComponent(window.location.hash.substring(1))},_urlChanged:function(){this._dontUpdateUrl=!0,this._hashChanged(),this.path=window.decodeURIComponent(window.location.pathname),this.query=window.location.search.substring(1),this._dontUpdateUrl=!1,this._updateUrl()},_getUrl:function(){var h=window.encodeURI(this.path).replace(/\#/g,'%23').replace(/\?/g,'%3F'),j='';this.query&&(j='?'+this.query.replace(/\#/g,'%23'));var k='';return this.hash&&(k='#'+window.encodeURI(this.hash)),h+j+k},_updateUrl:function(){if(!this._dontUpdateUrl&&this._initialized&&(this.path!==window.decodeURIComponent(window.location.pathname)||this.query!==window.location.search.substring(1)||this.hash!==window.decodeURIComponent(window.location.hash.substring(1)))){var h=this._getUrl(),j=a(h,window.location.protocol+'//'+window.location.host).href,k=window.performance.now(),l=this._lastChangedAt+this.dwellTime>k;this._lastChangedAt=k,l?window.history.replaceState({},'',j):window.history.pushState({},'',j),this.fire('location-changed',{},{node:window})}},_globalOnClick:function(h){if(!h.defaultPrevented){var j=this._getSameOriginLinkHref(h);j&&(h.preventDefault(),j===window.location.href||(window.history.pushState({},'',j),this.fire('location-changed',{},{node:window})))}},_getSameOriginLinkHref:function(h){if(0!==h.button)return null;if(h.metaKey||h.ctrlKey)return null;for(var m,j=Polymer.dom(h).path,k=null,l=0;l<j.length;l++)if(m=j[l],'A'===m.tagName&&m.href){k=m;break}if(!k)return null;if('_blank'===k.target)return null;if(('_top'===k.target||'_parent'===k.target)&&window.top!==window)return null;var o,n=k.href;o=null==document.baseURI?a(n):a(n,document.baseURI);var p=window.location.origin?window.location.origin:window.location.protocol+'//'+window.location.host;var q;if(q=o.origin?o.origin:o.protocol+'//'+o.host,q!=p)return null;var r=o.pathname+o.search+o.hash;if('/'!==r[0]&&(r='/'+r),this._urlSpaceRegExp&&!this._urlSpaceRegExp.test(r))return null;var s=a(r,window.location.href).href;return s},_makeRegExp:function(h){return RegExp(h)}})})();</script></head><body></body></html>